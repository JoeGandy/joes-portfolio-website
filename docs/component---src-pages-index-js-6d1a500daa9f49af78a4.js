(window.webpackJsonp=window.webpackJsonp||[]).push([[5,4],{156:function(e,t,a){"use strict";a.r(t);a(160);var n=a(8),r=a.n(n),c=a(0),i=a.n(c),o=a(164),s=a(161),l=a(163),u=a.n(l),m={apiEndpoint:"https://gandymainwebsite.cdn.prismic.io/api/v2",linkResolver:function(e){return"/"}};a.d(t,"default",function(){return h}),a(159);var d={FaFacebook:o.a,FaGithub:o.c,FaLinkedin:o.f,FaSteam:o.h,FaFileAlt:o.b,FaRssSquare:o.g,FaGitlab:o.d,FaLastfmSquare:o.e},h=function(e){function t(t){var a;return(a=e.call(this,t)||this).state={homePageData:null,tracks:[]},a.buildContext().then(function(e){e.api.query(u.a.Predicates.at("document.type","homepage"),{orderings:"[my.homepage.date desc]"}).then(function(e){a.setState({homePageData:e.results[0]})}),fetch("http://ws.audioscrobbler.com/2.0/?method=user.getrecenttracks&user=joegandy1&api_key=6900d6827e2c0d6248e54a385fe242b6&format=json").then(function(e){return e.json()}).then(function(e){return a.setState({tracks:e.recenttracks.track})})}).catch(function(e){console.error("Cannot contact the API, check your prismic configuration:\n"+e)}),a}r()(t,e);var a=t.prototype;return a.render=function(){var e=this.state.homePageData?this.state.homePageData.data:null,t=e?e.main_header[0].text:"Joe Gandy",a=e?e.tag_line[0].text:"Web Developer",n=e?e.main_links:[],r=this.state.tracks;return i.a.createElement("div",{className:"_main_wrapper"},i.a.createElement(s.Helmet,{title:t+" - "+a},i.a.createElement("meta",{charSet:"utf-8"}),i.a.createElement("meta",{name:"description",content:"Joe Gandy a web developer from derby specialising in backend apis, drupal with front end work with react and gatsby"}),i.a.createElement("meta",{name:"keywords",content:"drupal, react, developer, web, php, derby"}),i.a.createElement("html",{lang:"en"})),i.a.createElement("div",{className:"_center_box"},i.a.createElement("div",{className:"_avatar"}),i.a.createElement("h1",{className:"_main_title"},t,i.a.createElement("span",null,a)),i.a.createElement("ul",{className:"_icons"},n.map(function(e,t){var a=d[e.item_icon];return i.a.createElement("li",{key:t},i.a.createElement("a",{href:e.item_link.url,target:"_blank",title:e.item_text[0].text,rel:"noopener"},i.a.createElement(a,{size:"2em"})))}))),r.length>0?i.a.createElement("div",{className:"_recent_tracks "+(r.length>0?"load":"")},i.a.createElement("h3",null,"What I've been listening too"),r.map(function(e,t){if(!(t>5)){var a=e["@attr"]&&e["@attr"].nowplaying;return i.a.createElement("a",{key:t,href:e.url,target:"_blank"},i.a.createElement("div",{className:"_track"},i.a.createElement("div",{className:"_image"},i.a.createElement("img",{src:e.image[0]["#text"]})),i.a.createElement("p",{className:"_track_artist"},e.artist["#text"]),i.a.createElement("p",{className:"_track_name"},e.name),a?i.a.createElement("p",{className:"_play_status _now_playing"},"Playing now"):i.a.createElement("p",{className:"_play_status _played"},function(e,t){var a=e-t;if(a<6e4){var n=1!==Math.round(a/1e3);return Math.round(a/1e3)+" sec"+(n?"s":"")+" ago"}if(a<36e5){var r=1!==Math.round(a/6e4);return Math.round(a/6e4)+" min"+(r?"s":"")+" ago"}if(a<864e5){var c=1!==Math.round(a/36e5);return Math.round(a/36e5)+" hour"+(c?"s":"")+" ago"}if(a<2592e6){var i=1!==Math.round(a/864e5);return Math.round(a/864e5)+" day"+(i?"s":"")+" ago"}if(a<31536e6){var o=1!==Math.round(a/2592e6);return Math.round(a/2592e6)+" month"+(o?"s":"")+" ago"}var s=1!==Math.round(a/31536e6);return Math.round(a/31536e6)+" year"+(s?"s":"")+" ago"}(new Date,new Date(1e3*e.date.uts)))))}})):"")},a.buildContext=function(){var e=m.accessToken;return u.a.api(m.apiEndpoint,{accessToken:e}).then(function(t){return{api:t,endpoint:m.apiEndpoint,accessToken:e,linkResolver:m.linkResolver}})},t}(i.a.Component)},158:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(156);a(159),t.default=function(){return r.a.createElement(c.default,null)}}}]);
//# sourceMappingURL=component---src-pages-index-js-6d1a500daa9f49af78a4.js.map